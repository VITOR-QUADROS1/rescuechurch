<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mural — Igreja do Resgate</title>
  <meta name="theme-color" content="#10141E">
  <link rel="icon" href="logo.png">
  <link rel="stylesheet" href="style.css">

  <!-- Ajuste do modal para a imagem caber na viewport SEM cortes -->
  <style>
    /* Caixa do modal: deixa elástica e sem cortes */
    .img-box{
      width:auto;
      max-width:96vw;
      max-height:92vh;
      padding:0;
      background:transparent;      /* usa o backdrop do modal */
      border:none;
      box-shadow:none;
      overflow:visible;            /* importante: evitar corte */
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
    }
    .img-box figure{ margin:0; }

    /* A imagem passa a “conter” dentro da viewport */
    .img-box img{
      display:block;
      width:auto;                  /* deixa o browser decidir */
      height:auto;
      max-width:96vw;              /* limita por largura da tela */
      max-height:90vh;             /* e por altura da tela */
      object-fit:contain;          /* mantém proporção SEM esticar */
      border-radius:12px;
      background:#000;             /* base neutra em volta */
    }

    /* Legenda opcional */
    .img-caption{
      margin-top:8px;
      padding:6px 10px;
      background:rgba(0,0,0,.55);
      border-radius:10px;
      text-align:center;
    }

    /* Botão de fechar mais próximo da borda da imagem */
    .img-close{ right:8px; top:8px; }
  </style>
</head>
<body>
  <!-- Topbar igual ao site principal -->
  <header class="topbar">
    <a href="https://www.youtube.com/channel/UC11Km85MPiYbuPmG7Lz2Wjg" target="_blank" rel="noopener" class="brand-link">
      <div class="brand">
        <img src="logo.png" class="brand-logo" alt="Rescue Church">
        <span>Igreja do Resgate</span>
      </div>
    </a>
    <nav class="menu">
      <a href="../index.html#inicio">Início</a>
      <a href="../index.html#vdia">Versículo do Dia</a>
      <a href="../index.html#buscar">Buscar na Bíblia</a>
      <a href="../index.html#videos">Vídeos & Lives</a>
      <a href="mural.html" aria-current="page">Mural</a>
    </nav>
  </header>

  <main class="container">
    <section class="card section">
      <div class="section-head">
        <h2>Mural da Comunidade</h2>
        <p class="muted">Momentos especiais, eventos e avisos</p>
      </div>

      <!-- Grid do mural; os itens serão injetados via JS -->
      <div id="gallery" class="gallery-grid"></div>

      <p class="muted" style="margin-top:14px">
        Dica: clique numa foto para ampliar · use as setas do teclado (← →) · ESC para fechar
      </p>

      <div style="margin-top:18px; text-align:right">
        <a href="../index.html" class="btn pill">Voltar ao início</a>
      </div>
    </section>
  </main>

  <!-- Modal de imagem -->
  <div id="imgModal" class="img-modal" hidden>
    <div class="img-box">
      <button class="img-close" aria-label="Fechar">✕</button>
      <figure>
        <img id="imgFull" src="" alt="" />
        <figcaption id="imgCaption" class="img-caption"></figcaption>
      </figure>
    </div>
  </div>

  <script>
    // 1) LISTA DO MURAL: adicione aqui suas imagens (caminhos relativos a /assets)
    const GALLERY = [
      { src: "mural/mulheres.jpg"},
      { src: "mural/arca-na-minha-casa.jpg"},
      { src: "mural/domingo.jpg"},
      { src: "mural/sexta-feira.jpg"},
      
      // Acrescente mais linhas conforme fizer upload em assets/mural/
      // { src: "mural/batismos.jpg",        title: "Batismos" },
    ];

    // 2) Renderiza os cards na grade
    const $grid = document.getElementById('gallery');
    $grid.innerHTML = GALLERY.map((item, i) => `
      <a href="${item.src}" class="gallery-item" data-index="${i}" title="${item.title}">
        <img src="${item.src}" alt="${item.title}">
        <div class="gallery-caption">${item.title}</div>
      </a>
    `).join('');

    // 3) Modal: abre/fecha e navegação
    const $modal    = document.getElementById('imgModal');
    const $imgFull  = document.getElementById('imgFull');
    const $caption  = document.getElementById('imgCaption');
    const $closeBtn = $modal.querySelector('.img-close');

    let current = -1;

    function openModal(index) {
      current = index;
      const it = GALLERY[current];
      $imgFull.src = it.src;
      $imgFull.alt = it.title;
      $caption.textContent = it.title || '';
      $modal.hidden = false;
    }
    function closeModal() {
      $modal.hidden = true;
      $imgFull.src = '';
      current = -1;
    }
    function nextImg() {
      if (!GALLERY.length) return;
      current = (current + 1) % GALLERY.length;
      openModal(current);
    }
    function prevImg() {
      if (!GALLERY.length) return;
      current = (current - 1 + GALLERY.length) % GALLERY.length;
      openModal(current);
    }

    // Click nos cards
    $grid.addEventListener('click', (ev) => {
      const a = ev.target.closest('a.gallery-item');
      if (!a) return;
      ev.preventDefault();
      const i = parseInt(a.getAttribute('data-index'), 10);
      if (!Number.isNaN(i)) openModal(i);
    });

    // Fechar modal (botão, overlay, ESC e setas)
    $closeBtn.addEventListener('click', closeModal);
    $modal.addEventListener('click', (ev) => { if (ev.target === $modal) closeModal(); });
    window.addEventListener('keydown', (ev) => {
      if ($modal.hidden) return;
      if (ev.key === 'Escape') closeModal();
      else if (ev.key === 'ArrowRight') nextImg();
      else if (ev.key === 'ArrowLeft')  prevImg();
    });
  </script>
</body>
</html>
